<!-- templates/edit.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Participants</title>
</head>
<body>
    <h1>Edit Participants</h1>
    
    <!-- Form to add a new participant -->
    <form method="POST" action="{{ url_for('add_participant') }}">
        {{ add_form.hidden_tag() }}
        {{ add_form.name.label }} {{ add_form.name(size=20) }}
        <input type="submit" value="Add">
    </form>

    <ul>
        {% for participant in participants %}
            <li>
                {{ participant.name }}
                <a href="{{ url_for('edit_participants') }}">Edit</a>
                <a href="#" class="delete-link" data-participant-id="{{ participant.id }}">Delete</a>
            </li>
        {% endfor %}
    </ul>

    
    <!-- Add a link to trigger the action -->
    <a href="{{ url_for('reveal_list') }}">Randomize Participants</a>




    <script>
        // JavaScript to display a confirmation prompt and handle the deletion
        document.addEventListener('DOMContentLoaded', function() {
            var deleteLinks = document.querySelectorAll('.delete-link');
            deleteLinks.forEach(function(link) {
                link.addEventListener('click', function(event) {
                    event.preventDefault();
                    var participantId = link.getAttribute('data-participant-id');
                    
                    // Check if participantId is not an empty string
                    if (participantId !== '') {
                        var confirmDelete = confirm('Are you sure you want to delete this participant?');
                        
                        if (confirmDelete) {
                            window.location.href = '/delete/' + participantId;
                        }
                    }
                });
            });
        });
    </script>
</body>
</html>
